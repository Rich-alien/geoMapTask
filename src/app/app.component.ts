import {Component, OnInit} from '@angular/core';
import {GeoJsonService} from "../service/geo-json.service";
import {YaReadyEvent} from 'angular8-yandex-maps';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.sass']
})
export class AppComponent implements OnInit {
  title = 'geoMapTask';
  waypointData: Array<Array<number>> = [
    [55.3802028567147,53.8153834888652],
    [55.3812767916564,53.8143901977326],
    [55.3762156805571,53.8031055850668],
    [55.3711834627933,53.8204050222754],
    [55.3711725264929,53.8206368966577],
    [55.3712073971435,53.819904610038],
    [55.37797083,53.80672132],
    [55.37803739,53.80713689],
    [55.37596412,53.80215042],
    [55.3748912388843,53.8129058537902],
    [55.3744056308019,53.8130438694579],
    [55.374649742405,53.8129745263178],
    [55.3739256324919,53.8131791362582],
    [55.374168646167,53.8131111652992],
    [55.3736882702946,53.8132476756747],
    [55.37329053,53.81336707],
    [55.37502713,53.81337307],
    [55.6597018611198,54.1707171251567],
    [55.7073439729135,54.1090273845273],
    [55.7073537876991,54.1092598922565],
    [55.7073564562691,54.1094899526266],
    [55.7075031047829,54.1098175495961],
    [55.7026742453157,54.1207364001385],
    [55.7025789978967,54.1209276444962],
    [55.7025137827127,54.1210592381536],
    [55.7024201126096,54.1212527923928],
    [55.7023316795276,54.1214342157382],
    [55.6972817030039,54.1316351205472],
    [55.6970790406852,54.1318706645711],
    [55.6970453580392,54.1319175356929],
    [55.6969131465383,54.1321363324621],
    [55.7368501808846,54.0856978065364],
    [55.7472069085739,54.0684233795018],
    [55.74722154,54.06811576],
    [55.7472271684638,54.0678618777226],
    [55.7472385821725,54.0676337539604],
    [55.7472473803074,54.0674387822928],
    [55.7495661096948,54.0608399178842],
    [55.7494998422751,54.0609903478643],
    [55.67076837,54.16543817],
    [55.7493633070477,54.0612886095109],
    [55.7541609082408,54.0568810150154],
    [55.7540243472966,54.0570560252084],
    [55.7540182299725,54.0428191128199],
    [55.7540336867629,54.042500190384],
    [55.7105610370712,54.1194867954161],
    [55.7106671591516,54.1197499195075],
    [55.67454844,54.15445442],
    [55.6787960014774,54.155120944911],
    [55.7828698367743,54.0130388097713],
    [55.7827405761608,54.0126976376836],
    [55.7827681794952,54.0127742823006],
    [55.6967599282448,54.1323331634825],
    [55.7075309565773,54.1102158576449],
    [55.6880001330983,54.1304947926211],
    [55.6878659805197,54.1307431799563],
    [55.6878433599591,54.1307788649156],
    [55.6875251804971,54.1313761758661],
    [55.6558353981045,54.1867253885488],
    [55.6837345762153,54.146030443254],
    [55.6874967913658,54.1314339749309],
    [55.6841137683363,54.1450190082933],
    [55.6837914014969,54.1456310304459],
    [55.6842553555947,54.1448049646224],
    [55.6839870180497,54.1452635868998],
    [55.6837728243865,54.1460840278578],
    [55.6839462104827,54.1453326279696],
    [55.6835434304547,54.1456369027644],
    [55.6593393527736,54.1701238221592],
    [55.6548108046367,54.1830335958636],
    [55.6553941720587,54.1819498974637],
    [55.6553611459891,54.1820094255261],
    [55.6544957758789,54.1836462151696],
    [55.6552261513545,54.182258660641],
    [55.6546517775898,54.1833314019941],
    [55.6544698007338,54.1837083516747],
    [55.6608872125298,54.1679154882834],
    [55.6546184433889,54.1833982204029],
    [55.6438893672148,54.1913185828945],
    [55.6548471096721,54.1829715478365],
    [55.6549718457857,54.1827233443604],
    [55.6509531243205,54.1793624185716],
    [55.6550654895337,54.1824550027639],
    [55.6511773026457,54.1789655465478],
    [55.6511431824536,54.1790312075463],
    [55.6509897023186,54.1793000703703],
    [55.6594930567792,54.1703980727131],
    [55.69510866,54.12951512],
    [55.65952572,54.17045166],
    [55.6596537176245,54.1706442575946],
    [55.66072352,54.16770411],
    [55.707548509659,54.1105590436083],
    [55.70590658,54.141691],
    [55.6606728608942,54.1676566900384],
    [55.6439657402998,54.1911189669935],
    [55.6469060954527,54.1890846075404],
    [55.6801897622851,54.1459402837062],
    [55.6800818516747,54.1457582894965],
    [55.6800632884786,54.1456130719778],
    [55.6899728573859,54.1568849760972],
    [55.6900805844248,54.156739087514],
    [55.6898663583233,54.1570377693623],
    [55.6707450658776,54.1654590901639],
    [55.6706554876018,54.1656249476227],
    [55.6705612557172,54.165800089133],
    [55.67080772,54.16534359],
    [55.7494353668137,54.0611356139751],
    [55.6744952872174,54.1543641081387],
    [55.6743982278929,54.1541995564156],
    [55.6743462039308,54.1541115274516],
    [55.6785826510026,54.0751478871061],
    [55.6631904304888,54.1040878100469],
    [55.74228927,54.04373835],
    [55.6607235152105,54.1677041053562],
    [55.6708468945711,54.1652706890448],
    [55.6820264426795,54.1334815313808],
    [55.7813872936669,53.9982108968878],
    [55.7828698367743,54.0130388097713],
    [55.7866176126033,53.9940776811356],
    [55.7148405968944,54.0853442048651],
    [55.6972354516303,54.1316814776969],
    [55.6970453580392,54.1319175356929],
    [55.6835434304547,54.1456369027644],
    [55.6598933069476,54.1709392453218],
    [55.7371446955458,54.0539513353743],
    [55.6549718457857,54.1827233443604],
    [55.707548509659,54.1105590436083],
    [55.6440319174866,54.1689257150463],
    [55.7949787740473,54.0088340519553],
    [55.7714510990142,54.014384762638],
    [55.7793077302397,53.9854215550627],
    [55.7024097088771,54.1517028829633],
    [55.7107777103069,54.119979705232],
    [55.6918386010599,54.1152803337382],
    [55.6556161268746,54.1639046516342],
    [55.669816765832,54.1931346953048],
    [55.7472164173727,54.06810421126],
    [55.7472385821725,54.0676337539604],
    [55.6770269055273,54.1593285960815],
    [55.6768639428878,54.159141367177],
    [55.7276268324794,53.9817371844051],
    [55.6942446920607,54.1955227377444],
    [55.7810259,53.99879578],
    [55.78117229,53.99729064],
    [55.78106911,53.99694511],
    [55.78129033,53.99776859],
    [55.781261788417,53.9976884083866],
    [55.7811896569798,53.9973731316949],
    [55.781475281866,53.9985625237902],
    [55.78092098,53.99649418],
    [55.7808430293319,53.9961213901406],
    [55.7813872936669,53.9982108968878],
    [55.7814495622546,53.9984855086189],
    [55.7809460450997,53.9965730749085],
    [55.6980624579191,54.1219115839626],
    [55.6982001413664,54.1217027423429],
    [55.69833801,54.12150409],
    [54.4511221105923,50.8292264214444],
    [54.481512216732,50.7944160814174],
    [54.4841967462134,50.8007619449273],
    [54.4751962112195,50.8024297101798],
    [54.4753519123282,50.8023065545705],
    [54.477498927888,50.8170652304276],
    [54.4801913105943,50.8176609424426],
    [54.4756195475402,50.795060275413],
    [54.4749990460765,50.8026718169523],
    [54.4819171534726,50.8169073901868],
    [54.4514440559655,50.8365354054893],
    [54.4469819529445,50.8362854087669],
    [54.4466301832435,50.8364270177142],
    [54.4468056624149,50.836356071224],
    [54.44645776,50.83649772],
    [54.4798116997986,50.791285792465],
    [54.6664939982994,50.6663671492235],
    [54.6652368810726,50.6654316891723],
    [55.4175212334363,52.6024483755693],
    [55.3723487217257,52.6540064745785],
    [55.3724121959888,52.6542251380742],
    [55.3722586281245,52.6543709074391],
    [55.4173357792844,52.6019563930506],
    [55.4220371116631,52.5708966466848],
    [55.29595111,52.70383985],
    [55.4070086327702,52.6655085600248],
    [55.2958178912302,52.703628381832],
    [55.38901644,52.65497244],
    [55.3410153418108,52.6350482814351],
    [55.560980668601,52.6386673661546],
    [55.560980668601,52.6386673661546],
    [55.5841776618698,52.6704876945342],
    [55.4626874280252,52.66782155],
    [55.4961500231183,52.665431972305],
    [55.5225561786687,52.6481059868558],
    [55.5534221259056,52.7904699721105],
    [55.3972151512108,52.657745020754],
    [55.5511393394918,52.6910633044467],
    [55.403569545876,52.6183022189412],
    [55.3751384750036,52.7010764626677],
    [55.4114754747733,52.7915434146643],
    [55.4255297006352,52.6673679850061],
    [55.3934673812014,52.7433328969417],
    [55.5359381875492,52.6134064268656],
    [55.4223111176459,52.6395679449706],
    [55.2937972447885,52.6488322504027],
    [55.293435167127,52.6823568957687],
    [55.3442399464654,52.6756684636896],
    [55.3753380954333,52.6312466582838],
    [55.4341684755855,52.5823246746405],
    [55.473781883166,52.592394971472],
    [55.4456685088355,52.752087447372],
    [54.6591901326983,50.6944112647157],
    [54.6591436522178,50.6944408427771],
    [54.65901299,50.69453518],
    [54.657154626047,50.6708924602988],
    [54.657276825886,50.6711174030097],
    [54.6570313289259,50.6706658510931],
    [54.6569086757319,50.6704406163263],
    [54.6567875549812,50.6702078935428],
    [54.6564102568836,50.6695489397672],
    [54.6830452790493,50.6628770028554],
    [54.7271499471724,50.7125190859464],
    [54.7265050370757,50.7140584693217],
    [54.7180399655325,50.7119773164256],
    [54.7120476654691,50.7000975746296],
    [54.7077372,50.68756487],
    [54.6764335852567,50.662680855353],
    [54.676497185577,50.6624737566957],
    [54.6765618807699,50.6622681708286],
    [54.6747753322205,50.6681265823603],
    [54.6747269153677,50.6681272769915],
    [54.6712716635799,50.661762677986],
    [54.671084648262,50.6615674642309],
    [54.67098565448,50.66146539259],
    [54.6708868650959,50.6613575790597],
    [54.6682947266728,50.6647784798639],
    [54.6685106560606,50.6649569123815],
    [54.6686692992034,50.6650746511045],
    [54.6695175841875,50.670525343107],
    [54.6693545883081,50.6704354729036],
    [54.6692319423292,50.6702986798337],
    [54.676612523462,50.6766526117768],
    [54.6765175258432,50.6768821301632],
    [54.6764470229497,50.67650712822],
    [54.6766853505512,50.6764008866733],
    [54.6713070917809,50.6816496986435],
    [54.6604167821459,50.6945451038494],
    [54.6588948220462,50.6946387067579],
    [54.6525544281097,50.6664101895483],
    [54.6695263356759,50.6823095096762],
    [54.6693691221425,50.6822459065803],
    [54.6692105216214,50.6821707245442],
    [54.6689009888021,50.6820312679106],
    [54.6587695300615,50.6947314680126],
    [54.6586441978416,50.6948287240217],
    [54.6541855650618,50.6617507890323],
    [54.654127426869,50.662011668069],
    [54.6540633278471,50.6622619006523],
    [54.6540516634789,50.6623346546863],
    [54.6540009544867,50.6626090723256],
    [54.6650289819112,50.6754512306059],
    [54.6648914376847,50.6754355162458],
    [55.5842157977539,52.6706679836983],
    [55.5841776618698,52.6704876945342],
    [55.47382652,52.59250294],
    [55.473642150619,52.5921714469706],
    [55.4751942431323,52.5934424460034],
    [55.5578524128405,52.6414504343869],
    [55.5577132255621,52.6415879009169],
    [55.5609524125252,52.6381864009644],
    [55.5609815689652,52.6384667359788],
    [55.3887478931752,52.6530985732483],
    [55.3895333857162,52.6554834594463],
    [55.3892942874957,52.6552685715956],
    [55.3890444564839,52.6550268501131],
    [55.3557125163062,52.6838162416677],
    [55.3350957303649,52.5795837788598],
    [55.3581639576263,52.6505417209544],
    [55.35872161,52.65068006],
    [55.3587842178119,52.6507870951525],
    [55.5616840674218,52.6388267757896],
    [55.4174324217301,52.6022113382543],
    [55.2801181245183,52.6831486805105],
    [55.2750686945871,52.6720137841671],
    [55.2752888157608,52.6772749132352],
    [55.2750974551078,52.6773659112599],
    [55.2749226809712,52.6774628412141],
    [55.2751187900624,52.6780042965078],
    [55.274977281132,52.6780444885158],
    [55.2748197422482,52.6781094385529],
    [55.2936210610381,52.682355426115],
    [55.5841474765476,52.6703676363208],
    [55.3034693318232,52.7102677959402],
    [54.6829625264525,50.6631542461958],
    [54.66047077,50.67637321],
    [54.6604683319297,50.6760673714965],
    [54.6604627572594,50.6757543565839],
    [54.6566533514492,50.6699942053373],
    [54.656534417523,50.6697722591503],
    [54.6834564971581,50.6587783705577],
    [54.7271178883528,50.7121576744408],
    [54.7270960556158,50.7118443613624],
    [54.7265533815356,50.7140016385975],
    [54.7231014258256,50.6948506435953],
    [54.6816852511218,50.6672355105408],
    [54.6811247953705,50.6671696769673],
    [54.6812130525844,50.6668778497277],
    [54.6812707154189,50.6666216260588],
    [54.6810546670345,50.667451901103],
    [54.6749764784347,50.6680460385119],
    [54.6749335790107,50.668042052252],
    [54.6711777448067,50.6616644646893],
    [54.6687267023383,50.6651218574135],
    [54.6684556911447,50.6649187697804],
    [54.6764450764793,50.6765980430972],
    [54.6763931920192,50.6769228641024],
    [54.6763426665113,50.6769598965099],
    [54.6653570319611,50.6902075813971],
    [54.6733627797005,50.6756829586586],
    [54.6735401166566,50.6757140912059],
    [54.6604744932084,50.6770022744225],
    [54.6564309680836,50.6768165458744],
    [54.6696782124609,50.6823698802644],
    [54.6690572733313,50.6821001705249],
    [54.6647539820418,50.6754277034945],
    [54.4515114458348,50.8289605962742],
    [54.481827197998,50.7839085118427],
    [54.4819590805883,50.7838904494383],
    [54.4817187441307,50.7906251577624],
    [54.4815437312846,50.790896159026],
    [54.4815206645111,50.790968296283],
    [54.4813568346339,50.7911298707943],
    [54.4812865349341,50.7914142029288],
    [54.4812565325176,50.791449673769],
    [54.4811984621448,50.791306707786],
    [54.4810974991744,50.7915447544848],
    [54.4810648508625,50.7916025232397],
    [54.4799390790707,50.7912228393969],
    [54.4800674488864,50.7911513700704],
    [54.4801995845444,50.7910791689689],
    [54.4804072744022,50.7909454296784],
    [54.4803996587478,50.7908688246015],
    [54.4805579517591,50.7910513325691],
    [54.4807470571202,50.7907178864585],
    [54.4769447713822,50.7947747801139],
    [54.4768320810208,50.7948071897121],
    [54.4766037144725,50.7950803695087],
    [54.4764611539958,50.7950823628048],
    [54.47907216,50.79924381],
    [54.4792239079363,50.7990773932583],
    [54.479347345886,50.7989888185241],
    [54.4856644594544,50.8130097056936],
    [54.4858305409107,50.8128725156169],
    [54.4858930987621,50.8128396357804],
    [54.4817905211505,50.8169833591559],
    [54.4816612812342,50.8170680454818],
    [54.4799492059327,50.8178506464946],
    [54.4798841502018,50.8178764906575],
    [54.4772557082323,50.8172868936883],
    [54.4619828020527,50.8314035487482],
    [54.46185434562,50.8311796874783],
    [54.4590204843508,50.8353093321389],
    [54.4583132944515,50.8357677800898],
    [54.4574649915869,50.8369368845992],
    [54.4572498696939,50.8366881114969],
    [54.4574316021117,50.8376570560636],
    [54.4573142046784,50.8373693465366],
    [54.4571750402025,50.8375692399398],
    [54.4570536322485,50.8377931322042],
    [54.447626690694,50.828858348047],
    [54.451409407311,50.8291882315096],
    [54.4516438068733,50.8289087599928],
    [54.4517572057126,50.8365945709379],
    [54.4517176115732,50.8365428422189],
    [54.4515576795713,50.8364509918384],
    [54.4515073309053,50.8363747544013],
    [54.4516114947518,50.8371947276131],
    [54.4517465437493,50.8370420054007],
    [54.4515076065515,50.836837901844],
    [54.4514440559655,50.8365354054893],
    [54.4510275425114,50.8362541571725],
    [54.4511121727606,50.8361089185263],
    [54.4529769196861,50.8401920476833],
    [54.4527593092613,50.8399271675263],
    [54.4461098763245,50.8396021535126],
    [54.4459361728307,50.8391075794292],
    [54.4456473895632,50.8391411127308],
    [54.4456880904469,50.8389686589036],
    [54.4456264722976,50.8390791336294],
    [54.4454150318398,50.8387570886102],
    [54.4616549584921,50.8313035096798],
    [54.4575468931425,50.8368516886803],
    [54.4590950516036,50.8350101488498],
    [54.44592627,50.83940509],
    [54.4786182702781,50.8198525897552],
    [54.48410281,50.80059812],
    [54.4814221580741,50.7943950433563],
    [54.4755778753781,50.7950792756522],
    [54.481746859584,50.7905809483719],
    [54.4476680805289,50.8282339967095],
    [54.4821157361123,50.8167765156135],
    [54.482401594515,50.8165780894239],
    [54.4586473179722,50.8355399778951],
    [54.4787665733544,50.8197425146538],
    [54.47434384,50.7807016],
    [54.48220111,50.8157706],
    [54.46340694,50.81126526],
    [54.4454150318398,50.8387570886102],
    [54.4647170611934,50.8385760262452],
    [54.4430470798933,50.8332685361828],
    [54.4584809340486,50.8356492349516],
    [54.4525624119838,50.8382860621002],
    [54.4524138037617,50.8384487376043],
    [54.4525923346314,50.8382774811374],
    [54.4523722797211,50.8384743080953],
    [54.4473272256735,50.8361590949929],
    [54.4471580533948,50.8362227677261]
  ];
  // waypointData = [
  //
  // ]
  distance = 0;
  constructor(private geoJsonService: GeoJsonService) {
  }

  // подсчет длины всего пути по методу Евклидово.
  calculationOfTheSettlement() {
    // let coordinates = this.coordinatesData;
    // for (let i = 1; i < coordinates.length; i++) {
    //   this.distance += Math.sqrt(((coordinates[i][0] - coordinates[i - 1][0]) ** 2) + ((coordinates[i][1] - coordinates[i - 1][1]) ** 2))
    // }
  }

  ngOnInit() {
    // this.geoJsonService.getGeoJson().subscribe(
    //   data => {
    //     for (let coordinatesArray of data.features[0].geometry.coordinates) {
    //       for (let coordinates of coordinatesArray) {
    //         for (let coordinate of coordinates) {
    //           this.coordinatesData.push(coordinate);
    //         }
    //         this.waypointData.push(coordinates);
    //       }
    //     }
    //     this.calculationOfTheSettlement();
    //   },
    //   error => {
    //     console.log(error);
    //   }
    // )
  }
  // функция при которой мы можем убрать все линии за терриорией карты, при её использваоние
  // устраниятся все те что выходят за пределы линий
  // для её работы нужно будет удалить c строчки 36;
  // а так же расскоментировать запуск функции на 59 строчке
  // но по заданию ничего не говорилось про удаление ненужных точек. но функционал есть для этого
  // getDataWithNormalRange(): void {
  //   this.coordinatesData.filter((waypoint: number[]) => {
  //     if ((waypoint[0] > 0 && waypoint[0] < 90) && (waypoint[1] > 0 && waypoint[1] < 180)) {
  //       this.waypointData.push(waypoint);
  //     }
  //   })
  // }
  // создание кривых на карте в виде полигонов.
  onMapReady(event: YaReadyEvent<ymaps.Map>): void {
    // this.getDataWithNormalRange();
    let myPolyline: any;
    for (let polyLine of this.waypointData) {
      myPolyline = new ymaps.Placemark(polyLine, {balloonContent: polyLine.toString()}, {balloonContent: polyLine});
      event.target.geoObjects.add(myPolyline);
    }
    // const placeMark = new ymaps.Placemark([59.241384311000076, 69.15289948100012],{
    //   hintContent: 'Расстояние',
    //   balloonContent: this.distance.toString()
    // })
    // event.target.geoObjects.add(placeMark);
  }
}
